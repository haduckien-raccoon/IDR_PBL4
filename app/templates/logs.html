<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Apache Logs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .log-line {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-family: monospace;
    }
    .log-new {
      background-color: rgba(34, 197, 94, 0.2); /* xanh nhạt highlight */
      transition: background-color 1s ease;
    }
  </style>
</head>
<body class="bg-gray-900 text-green-300">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-green-400">Realtime Apache Logs</h1>
    <div id="logBox" class="bg-black p-4 rounded h-[600px] overflow-y-scroll shadow-lg border border-gray-700"></div>
  </div>

  <script>
    const logBox = document.getElementById("logBox");
    const ws = new WebSocket(`ws://localhost:8000/api/logs/ws/logs`);

    ws.onmessage = (event) => {
      const line = document.createElement("div");
      line.textContent = event.data;
      line.classList.add("log-line", "log-new");
      logBox.appendChild(line);
      logBox.scrollTop = logBox.scrollHeight;

      // Bỏ highlight sau 1.5s để giữ nền bình thường
      setTimeout(() => line.classList.remove("log-new"), 1500);
    };

    ws.onclose = () => {
      const msg = document.createElement("div");
      msg.textContent = "⚠️ WebSocket disconnected.";
      msg.classList.add("log-line", "text-red-400");
      logBox.appendChild(msg);
    };
  </script>
</body>
</html>
